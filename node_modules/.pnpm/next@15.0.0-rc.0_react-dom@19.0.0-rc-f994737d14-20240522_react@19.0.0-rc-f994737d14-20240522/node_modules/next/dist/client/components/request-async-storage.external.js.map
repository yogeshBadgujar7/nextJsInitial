{"version":3,"sources":["../../../src/client/components/request-async-storage.external.ts"],"sourcesContent":["import type { AsyncLocalStorage } from 'async_hooks'\nimport type { DraftModeProvider } from '../../server/async-storage/draft-mode-provider'\nimport type { ResponseCookies } from '../../server/web/spec-extension/cookies'\nimport type { ReadonlyHeaders } from '../../server/web/spec-extension/adapters/headers'\nimport type { ReadonlyRequestCookies } from '../../server/web/spec-extension/adapters/request-cookies'\n\n// Share the instance module in the next-shared layer\nimport { requestAsyncStorage } from './request-async-storage-instance' with { 'turbopack-transition': 'next-shared' }\nimport type { DeepReadonly } from '../../shared/lib/deep-readonly'\nimport type { AfterContext } from '../../server/after/after-context'\n\nexport interface RequestStore {\n  readonly headers: ReadonlyHeaders\n  readonly cookies: ReadonlyRequestCookies\n  readonly mutableCookies: ResponseCookies\n  readonly draftMode: DraftModeProvider\n  readonly reactLoadableManifest: DeepReadonly<\n    Record<string, { files: string[] }>\n  >\n  readonly assetPrefix: string\n  readonly afterContext: AfterContext | undefined\n}\n\nexport type RequestAsyncStorage = AsyncLocalStorage<RequestStore>\n\nexport { requestAsyncStorage }\n\nexport function getExpectedRequestStore(callingExpression: string) {\n  const store = requestAsyncStorage.getStore()\n  if (store) return store\n  throw new Error(\n    `\\`${callingExpression}\\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`\n  )\n}\n"],"names":["getExpectedRequestStore","requestAsyncStorage","callingExpression","store","getStore","Error"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;;;;;IA2BgBA,uBAAuB;eAAvBA;;IAFPC,mBAAmB;eAAnBA,gDAAmB;;;6CAlBQ;AAoB7B,SAASD,wBAAwBE,iBAAyB;IAC/D,MAAMC,QAAQF,gDAAmB,CAACG,QAAQ;IAC1C,IAAID,OAAO,OAAOA;IAClB,MAAM,IAAIE,MACR,AAAC,MAAIH,oBAAkB;AAE3B"}