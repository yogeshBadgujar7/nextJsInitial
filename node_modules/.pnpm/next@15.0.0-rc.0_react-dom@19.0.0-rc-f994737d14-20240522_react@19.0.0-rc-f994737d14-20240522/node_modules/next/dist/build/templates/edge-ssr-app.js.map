{"version":3,"sources":["../../../src/build/templates/edge-ssr-app.ts"],"sourcesContent":["import '../../server/web/globals'\nimport { adapter } from '../../server/web/adapter'\nimport { getRender } from '../webpack/loaders/next-edge-ssr-loader/render'\nimport { IncrementalCache } from '../../server/lib/incremental-cache'\n\nimport { renderToHTMLOrFlight as renderToHTML } from '../../server/app-render/app-render'\nimport * as pageMod from 'VAR_USERLAND'\n\nimport type { DocumentType } from '../../shared/lib/utils'\nimport type { BuildManifest } from '../../server/get-page-files'\nimport type { RequestData } from '../../server/web/types'\nimport type { NextConfigComplete } from '../../server/config-shared'\nimport { PAGE_TYPES } from '../../lib/page-types'\nimport { setReferenceManifestsSingleton } from '../../server/app-render/encryption-utils'\nimport { createServerModuleMap } from '../../server/app-render/action-utils'\n\ndeclare const incrementalCacheHandler: any\n// OPTIONAL_IMPORT:incrementalCacheHandler\n\nconst Document: DocumentType = null!\nconst appMod = null\nconst errorMod = null\nconst error500Mod = null\n\n// injected by the loader afterwards.\ndeclare const sriEnabled: boolean\ndeclare const isServerComponent: boolean\ndeclare const dev: boolean\ndeclare const serverActions: any\ndeclare const nextConfig: NextConfigComplete\n// INJECT:sriEnabled\n// INJECT:isServerComponent\n// INJECT:dev\n// INJECT:serverActions\n// INJECT:nextConfig\n\nconst maybeJSONParse = (str?: string) => (str ? JSON.parse(str) : undefined)\n\nconst buildManifest: BuildManifest = self.__BUILD_MANIFEST as any\nconst prerenderManifest = maybeJSONParse(self.__PRERENDER_MANIFEST)\nconst reactLoadableManifest = maybeJSONParse(self.__REACT_LOADABLE_MANIFEST)\nconst rscManifest = self.__RSC_MANIFEST?.['VAR_PAGE']\nconst rscServerManifest = maybeJSONParse(self.__RSC_SERVER_MANIFEST)\nconst subresourceIntegrityManifest = sriEnabled\n  ? maybeJSONParse(self.__SUBRESOURCE_INTEGRITY_MANIFEST)\n  : undefined\nconst nextFontManifest = maybeJSONParse(self.__NEXT_FONT_MANIFEST)\n\nconst interceptionRouteRewrites =\n  maybeJSONParse(self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST) ?? []\n\nif (rscManifest && rscServerManifest) {\n  setReferenceManifestsSingleton({\n    clientReferenceManifest: rscManifest,\n    serverActionsManifest: rscServerManifest,\n    serverModuleMap: createServerModuleMap({\n      serverActionsManifest: rscServerManifest,\n      pageName: 'VAR_PAGE',\n    }),\n  })\n}\n\nconst render = getRender({\n  pagesType: PAGE_TYPES.APP,\n  dev,\n  page: 'VAR_PAGE',\n  appMod,\n  pageMod,\n  errorMod,\n  error500Mod,\n  Document,\n  buildManifest,\n  prerenderManifest,\n  renderToHTML,\n  reactLoadableManifest,\n  clientReferenceManifest: isServerComponent ? rscManifest : null,\n  serverActionsManifest: isServerComponent ? rscServerManifest : null,\n  serverActions: isServerComponent ? serverActions : undefined,\n  subresourceIntegrityManifest,\n  config: nextConfig,\n  buildId: process.env.__NEXT_BUILD_ID!,\n  nextFontManifest,\n  incrementalCacheHandler,\n  interceptionRouteRewrites,\n})\n\nexport const ComponentMod = pageMod\n\nexport default function nHandler(opts: { page: string; request: RequestData }) {\n  return adapter({\n    ...opts,\n    IncrementalCache,\n    handler: render,\n  })\n}\n"],"names":["ComponentMod","nHandler","self","Document","appMod","errorMod","error500Mod","maybeJSONParse","str","JSON","parse","undefined","buildManifest","__BUILD_MANIFEST","prerenderManifest","__PRERENDER_MANIFEST","reactLoadableManifest","__REACT_LOADABLE_MANIFEST","rscManifest","__RSC_MANIFEST","rscServerManifest","__RSC_SERVER_MANIFEST","subresourceIntegrityManifest","sriEnabled","__SUBRESOURCE_INTEGRITY_MANIFEST","nextFontManifest","__NEXT_FONT_MANIFEST","interceptionRouteRewrites","__INTERCEPTION_ROUTE_REWRITE_MANIFEST","setReferenceManifestsSingleton","clientReferenceManifest","serverActionsManifest","serverModuleMap","createServerModuleMap","pageName","render","getRender","pagesType","PAGE_TYPES","APP","dev","page","pageMod","renderToHTML","isServerComponent","serverActions","config","nextConfig","buildId","process","env","__NEXT_BUILD_ID","incrementalCacheHandler","opts","adapter","IncrementalCache","handler"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;;;;;IAsFaA,YAAY;eAAZA;;IAEb,OAMC;eANuBC;;;QAxFjB;yBACiB;wBACE;kCACO;2BAEoB;sEAC5B;2BAME;iCACoB;6BACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA2BlBC;AAxBpB,0CAA0C;AAE1C,MAAMC,WAAyB;AAC/B,MAAMC,SAAS;AACf,MAAMC,WAAW;AACjB,MAAMC,cAAc;AAQpB,oBAAoB;AACpB,2BAA2B;AAC3B,aAAa;AACb,uBAAuB;AACvB,oBAAoB;AAEpB,MAAMC,iBAAiB,CAACC,MAAkBA,MAAMC,KAAKC,KAAK,CAACF,OAAOG;AAElE,MAAMC,gBAA+BV,KAAKW,gBAAgB;AAC1D,MAAMC,oBAAoBP,eAAeL,KAAKa,oBAAoB;AAClE,MAAMC,wBAAwBT,eAAeL,KAAKe,yBAAyB;AAC3E,MAAMC,eAAchB,uBAAAA,KAAKiB,cAAc,qBAAnBjB,oBAAqB,CAAC,WAAW;AACrD,MAAMkB,oBAAoBb,eAAeL,KAAKmB,qBAAqB;AACnE,MAAMC,+BAA+BC,aACjChB,eAAeL,KAAKsB,gCAAgC,IACpDb;AACJ,MAAMc,mBAAmBlB,eAAeL,KAAKwB,oBAAoB;AAEjE,MAAMC,4BACJpB,eAAeL,KAAK0B,qCAAqC,KAAK,EAAE;AAElE,IAAIV,eAAeE,mBAAmB;IACpCS,IAAAA,+CAA8B,EAAC;QAC7BC,yBAAyBZ;QACzBa,uBAAuBX;QACvBY,iBAAiBC,IAAAA,kCAAqB,EAAC;YACrCF,uBAAuBX;YACvBc,UAAU;QACZ;IACF;AACF;AAEA,MAAMC,SAASC,IAAAA,iBAAS,EAAC;IACvBC,WAAWC,qBAAU,CAACC,GAAG;IACzBC;IACAC,MAAM;IACNrC;IACAsC,SAAAA;IACArC;IACAC;IACAH;IACAS;IACAE;IACA6B,cAAAA,+BAAY;IACZ3B;IACAc,yBAAyBc,oBAAoB1B,cAAc;IAC3Da,uBAAuBa,oBAAoBxB,oBAAoB;IAC/DyB,eAAeD,oBAAoBC,gBAAgBlC;IACnDW;IACAwB,QAAQC;IACRC,SAASC,QAAQC,GAAG,CAACC,eAAe;IACpC1B;IACA2B;IACAzB;AACF;AAEO,MAAM3B,eAAe0C;AAEb,SAASzC,SAASoD,IAA4C;IAC3E,OAAOC,IAAAA,gBAAO,EAAC;QACb,GAAGD,IAAI;QACPE,kBAAAA,kCAAgB;QAChBC,SAASrB;IACX;AACF"}