{"version":3,"sources":["../../src/server/client-component-renderer-logger.ts"],"sourcesContent":["// Combined load times for loading client components\nlet clientComponentLoadStart = 0\nlet clientComponentLoadTimes = 0\nlet clientComponentLoadCount = 0\n\nexport function wrapClientComponentLoader(ComponentMod: any) {\n  if (!('performance' in globalThis)) {\n    return ComponentMod.__next_app__\n  }\n\n  return {\n    require: (...args: any[]) => {\n      if (clientComponentLoadStart === 0) {\n        clientComponentLoadStart = performance.now()\n      }\n\n      const startTime = performance.now()\n      try {\n        clientComponentLoadCount += 1\n        return ComponentMod.__next_app__.require(...args)\n      } finally {\n        clientComponentLoadTimes += performance.now() - startTime\n      }\n    },\n    loadChunk: (...args: any[]) => {\n      const startTime = performance.now()\n      try {\n        clientComponentLoadCount += 1\n        return ComponentMod.__next_app__.loadChunk(...args)\n      } finally {\n        clientComponentLoadTimes += performance.now() - startTime\n      }\n    },\n  }\n}\n\nexport function getClientComponentLoaderMetrics(\n  options: { reset?: boolean } = {}\n) {\n  const metrics =\n    clientComponentLoadStart === 0\n      ? undefined\n      : {\n          clientComponentLoadStart,\n          clientComponentLoadTimes,\n          clientComponentLoadCount,\n        }\n\n  if (options.reset) {\n    clientComponentLoadStart = 0\n    clientComponentLoadTimes = 0\n    clientComponentLoadCount = 0\n  }\n\n  return metrics\n}\n"],"names":["getClientComponentLoaderMetrics","wrapClientComponentLoader","clientComponentLoadStart","clientComponentLoadTimes","clientComponentLoadCount","ComponentMod","globalThis","__next_app__","require","args","performance","now","startTime","loadChunk","options","metrics","undefined","reset"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA,oDAAoD;;;;;;;;;;;;;;;;IAoCpCA,+BAA+B;eAA/BA;;IA/BAC,yBAAyB;eAAzBA;;;AAJhB,IAAIC,2BAA2B;AAC/B,IAAIC,2BAA2B;AAC/B,IAAIC,2BAA2B;AAExB,SAASH,0BAA0BI,YAAiB;IACzD,IAAI,CAAE,CAAA,iBAAiBC,UAAS,GAAI;QAClC,OAAOD,aAAaE,YAAY;IAClC;IAEA,OAAO;QACLC,SAAS,CAAC,GAAGC;YACX,IAAIP,6BAA6B,GAAG;gBAClCA,2BAA2BQ,YAAYC,GAAG;YAC5C;YAEA,MAAMC,YAAYF,YAAYC,GAAG;YACjC,IAAI;gBACFP,4BAA4B;gBAC5B,OAAOC,aAAaE,YAAY,CAACC,OAAO,IAAIC;YAC9C,SAAU;gBACRN,4BAA4BO,YAAYC,GAAG,KAAKC;YAClD;QACF;QACAC,WAAW,CAAC,GAAGJ;YACb,MAAMG,YAAYF,YAAYC,GAAG;YACjC,IAAI;gBACFP,4BAA4B;gBAC5B,OAAOC,aAAaE,YAAY,CAACM,SAAS,IAAIJ;YAChD,SAAU;gBACRN,4BAA4BO,YAAYC,GAAG,KAAKC;YAClD;QACF;IACF;AACF;AAEO,SAASZ,gCACdc,UAA+B,CAAC,CAAC;IAEjC,MAAMC,UACJb,6BAA6B,IACzBc,YACA;QACEd;QACAC;QACAC;IACF;IAEN,IAAIU,QAAQG,KAAK,EAAE;QACjBf,2BAA2B;QAC3BC,2BAA2B;QAC3BC,2BAA2B;IAC7B;IAEA,OAAOW;AACT"}