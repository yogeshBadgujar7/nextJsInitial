{"version":3,"sources":["../../../src/build/webpack-config-rules/resolve.ts"],"sourcesContent":["import {\n  COMPILER_NAMES,\n  type CompilerNameValues,\n} from '../../shared/lib/constants'\n\n// exports.<conditionName>\nexport const edgeConditionNames = [\n  'edge-light',\n  'worker',\n  // inherits the default conditions\n  '...',\n]\n\nconst mainFieldsPerCompiler: Record<\n  CompilerNameValues | 'server-esm',\n  string[]\n> = {\n  // For default case, prefer CJS over ESM on server side. e.g. pages dir SSR\n  [COMPILER_NAMES.server]: ['main', 'module'],\n  [COMPILER_NAMES.client]: ['browser', 'module', 'main'],\n  [COMPILER_NAMES.edgeServer]: edgeConditionNames,\n  // For bundling-all strategy, prefer ESM over CJS\n  'server-esm': ['module', 'main'],\n}\n\nexport function getMainField(\n  compilerType: CompilerNameValues,\n  preferEsm: boolean\n) {\n  if (compilerType === COMPILER_NAMES.edgeServer) {\n    return edgeConditionNames\n  } else if (compilerType === COMPILER_NAMES.client) {\n    return mainFieldsPerCompiler[COMPILER_NAMES.client]\n  }\n\n  // Prefer module fields over main fields for isomorphic packages on server layer\n  return preferEsm\n    ? mainFieldsPerCompiler['server-esm']\n    : mainFieldsPerCompiler[COMPILER_NAMES.server]\n}\n"],"names":["COMPILER_NAMES","edgeConditionNames","mainFieldsPerCompiler","server","client","edgeServer","getMainField","compilerType","preferEsm"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA,SACEA,cAAc,QAET,6BAA4B;AAEnC,0BAA0B;AAC1B,OAAO,MAAMC,qBAAqB;IAChC;IACA;IACA,kCAAkC;IAClC;CACD,CAAA;AAED,MAAMC,wBAGF;IACF,2EAA2E;IAC3E,CAACF,eAAeG,MAAM,CAAC,EAAE;QAAC;QAAQ;KAAS;IAC3C,CAACH,eAAeI,MAAM,CAAC,EAAE;QAAC;QAAW;QAAU;KAAO;IACtD,CAACJ,eAAeK,UAAU,CAAC,EAAEJ;IAC7B,iDAAiD;IACjD,cAAc;QAAC;QAAU;KAAO;AAClC;AAEA,OAAO,SAASK,aACdC,YAAgC,EAChCC,SAAkB;IAElB,IAAID,iBAAiBP,eAAeK,UAAU,EAAE;QAC9C,OAAOJ;IACT,OAAO,IAAIM,iBAAiBP,eAAeI,MAAM,EAAE;QACjD,OAAOF,qBAAqB,CAACF,eAAeI,MAAM,CAAC;IACrD;IAEA,gFAAgF;IAChF,OAAOI,YACHN,qBAAqB,CAAC,aAAa,GACnCA,qBAAqB,CAACF,eAAeG,MAAM,CAAC;AAClD"}