{"version":3,"sources":["../../../src/build/templates/edge-ssr-app.ts"],"sourcesContent":["import '../../server/web/globals'\nimport { adapter } from '../../server/web/adapter'\nimport { getRender } from '../webpack/loaders/next-edge-ssr-loader/render'\nimport { IncrementalCache } from '../../server/lib/incremental-cache'\n\nimport { renderToHTMLOrFlight as renderToHTML } from '../../server/app-render/app-render'\nimport * as pageMod from 'VAR_USERLAND'\n\nimport type { DocumentType } from '../../shared/lib/utils'\nimport type { BuildManifest } from '../../server/get-page-files'\nimport type { RequestData } from '../../server/web/types'\nimport type { NextConfigComplete } from '../../server/config-shared'\nimport { PAGE_TYPES } from '../../lib/page-types'\nimport { setReferenceManifestsSingleton } from '../../server/app-render/encryption-utils'\nimport { createServerModuleMap } from '../../server/app-render/action-utils'\n\ndeclare const incrementalCacheHandler: any\n// OPTIONAL_IMPORT:incrementalCacheHandler\n\nconst Document: DocumentType = null!\nconst appMod = null\nconst errorMod = null\nconst error500Mod = null\n\n// injected by the loader afterwards.\ndeclare const sriEnabled: boolean\ndeclare const isServerComponent: boolean\ndeclare const dev: boolean\ndeclare const serverActions: any\ndeclare const nextConfig: NextConfigComplete\n// INJECT:sriEnabled\n// INJECT:isServerComponent\n// INJECT:dev\n// INJECT:serverActions\n// INJECT:nextConfig\n\nconst maybeJSONParse = (str?: string) => (str ? JSON.parse(str) : undefined)\n\nconst buildManifest: BuildManifest = self.__BUILD_MANIFEST as any\nconst prerenderManifest = maybeJSONParse(self.__PRERENDER_MANIFEST)\nconst reactLoadableManifest = maybeJSONParse(self.__REACT_LOADABLE_MANIFEST)\nconst rscManifest = self.__RSC_MANIFEST?.['VAR_PAGE']\nconst rscServerManifest = maybeJSONParse(self.__RSC_SERVER_MANIFEST)\nconst subresourceIntegrityManifest = sriEnabled\n  ? maybeJSONParse(self.__SUBRESOURCE_INTEGRITY_MANIFEST)\n  : undefined\nconst nextFontManifest = maybeJSONParse(self.__NEXT_FONT_MANIFEST)\n\nconst interceptionRouteRewrites =\n  maybeJSONParse(self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST) ?? []\n\nif (rscManifest && rscServerManifest) {\n  setReferenceManifestsSingleton({\n    clientReferenceManifest: rscManifest,\n    serverActionsManifest: rscServerManifest,\n    serverModuleMap: createServerModuleMap({\n      serverActionsManifest: rscServerManifest,\n      pageName: 'VAR_PAGE',\n    }),\n  })\n}\n\nconst render = getRender({\n  pagesType: PAGE_TYPES.APP,\n  dev,\n  page: 'VAR_PAGE',\n  appMod,\n  pageMod,\n  errorMod,\n  error500Mod,\n  Document,\n  buildManifest,\n  prerenderManifest,\n  renderToHTML,\n  reactLoadableManifest,\n  clientReferenceManifest: isServerComponent ? rscManifest : null,\n  serverActionsManifest: isServerComponent ? rscServerManifest : null,\n  serverActions: isServerComponent ? serverActions : undefined,\n  subresourceIntegrityManifest,\n  config: nextConfig,\n  buildId: process.env.__NEXT_BUILD_ID!,\n  nextFontManifest,\n  incrementalCacheHandler,\n  interceptionRouteRewrites,\n})\n\nexport const ComponentMod = pageMod\n\nexport default function nHandler(opts: { page: string; request: RequestData }) {\n  return adapter({\n    ...opts,\n    IncrementalCache,\n    handler: render,\n  })\n}\n"],"names":["self","adapter","getRender","IncrementalCache","renderToHTMLOrFlight","renderToHTML","pageMod","PAGE_TYPES","setReferenceManifestsSingleton","createServerModuleMap","Document","appMod","errorMod","error500Mod","maybeJSONParse","str","JSON","parse","undefined","buildManifest","__BUILD_MANIFEST","prerenderManifest","__PRERENDER_MANIFEST","reactLoadableManifest","__REACT_LOADABLE_MANIFEST","rscManifest","__RSC_MANIFEST","rscServerManifest","__RSC_SERVER_MANIFEST","subresourceIntegrityManifest","sriEnabled","__SUBRESOURCE_INTEGRITY_MANIFEST","nextFontManifest","__NEXT_FONT_MANIFEST","interceptionRouteRewrites","__INTERCEPTION_ROUTE_REWRITE_MANIFEST","clientReferenceManifest","serverActionsManifest","serverModuleMap","pageName","render","pagesType","APP","dev","page","isServerComponent","serverActions","config","nextConfig","buildId","process","env","__NEXT_BUILD_ID","incrementalCacheHandler","ComponentMod","nHandler","opts","handler"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"IAyCoBA;AAzCpB,OAAO,2BAA0B;AACjC,SAASC,OAAO,QAAQ,2BAA0B;AAClD,SAASC,SAAS,QAAQ,iDAAgD;AAC1E,SAASC,gBAAgB,QAAQ,qCAAoC;AAErE,SAASC,wBAAwBC,YAAY,QAAQ,qCAAoC;AACzF,YAAYC,aAAa,eAAc;AAMvC,SAASC,UAAU,QAAQ,uBAAsB;AACjD,SAASC,8BAA8B,QAAQ,2CAA0C;AACzF,SAASC,qBAAqB,QAAQ,uCAAsC;AAG5E,0CAA0C;AAE1C,MAAMC,WAAyB;AAC/B,MAAMC,SAAS;AACf,MAAMC,WAAW;AACjB,MAAMC,cAAc;AAQpB,oBAAoB;AACpB,2BAA2B;AAC3B,aAAa;AACb,uBAAuB;AACvB,oBAAoB;AAEpB,MAAMC,iBAAiB,CAACC,MAAkBA,MAAMC,KAAKC,KAAK,CAACF,OAAOG;AAElE,MAAMC,gBAA+BnB,KAAKoB,gBAAgB;AAC1D,MAAMC,oBAAoBP,eAAed,KAAKsB,oBAAoB;AAClE,MAAMC,wBAAwBT,eAAed,KAAKwB,yBAAyB;AAC3E,MAAMC,eAAczB,uBAAAA,KAAK0B,cAAc,qBAAnB1B,oBAAqB,CAAC,WAAW;AACrD,MAAM2B,oBAAoBb,eAAed,KAAK4B,qBAAqB;AACnE,MAAMC,+BAA+BC,aACjChB,eAAed,KAAK+B,gCAAgC,IACpDb;AACJ,MAAMc,mBAAmBlB,eAAed,KAAKiC,oBAAoB;AAEjE,MAAMC,4BACJpB,eAAed,KAAKmC,qCAAqC,KAAK,EAAE;AAElE,IAAIV,eAAeE,mBAAmB;IACpCnB,+BAA+B;QAC7B4B,yBAAyBX;QACzBY,uBAAuBV;QACvBW,iBAAiB7B,sBAAsB;YACrC4B,uBAAuBV;YACvBY,UAAU;QACZ;IACF;AACF;AAEA,MAAMC,SAAStC,UAAU;IACvBuC,WAAWlC,WAAWmC,GAAG;IACzBC;IACAC,MAAM;IACNjC;IACAL;IACAM;IACAC;IACAH;IACAS;IACAE;IACAhB;IACAkB;IACAa,yBAAyBS,oBAAoBpB,cAAc;IAC3DY,uBAAuBQ,oBAAoBlB,oBAAoB;IAC/DmB,eAAeD,oBAAoBC,gBAAgB5B;IACnDW;IACAkB,QAAQC;IACRC,SAASC,QAAQC,GAAG,CAACC,eAAe;IACpCpB;IACAqB;IACAnB;AACF;AAEA,OAAO,MAAMoB,eAAehD,QAAO;AAEnC,eAAe,SAASiD,SAASC,IAA4C;IAC3E,OAAOvD,QAAQ;QACb,GAAGuD,IAAI;QACPrD;QACAsD,SAASjB;IACX;AACF"}